import{d as y,s as o,i as v}from"../chunks/Y7cVukrA.js";import{c as b,s as S,a as I}from"../chunks/Cv0rH00-.js";import{F as l,w as A,al as k,T as w,z as h,aw as z,V as c,W as g}from"../chunks/DyeNOqZH.js";import{t as d,b as p}from"../chunks/DGLxlnBC.js";import{i as _}from"../chunks/fso8Beey.js";import{c as P}from"../chunks/B3dKbglg.js";import{s as j,a as C}from"../chunks/H3nJOYWQ.js";const E=!0,G=E,K=async()=>{var r,s,i;try{await y.initialize(),console.log("IndexedDB initialized"),await o.init(),console.log("Settings store initialized");const t=l(o);if(console.log("Current settings state:",t),!((r=t.apiKeys)!=null&&r.google)&&G&&window.localStorage)try{const a=localStorage.getItem("gervais-api-backup");if(a){const e=JSON.parse(a);(s=e==null?void 0:e.apiKeys)!=null&&s.google&&(console.log("Found Google API key in localStorage backup, restoring it"),await o.updateApiKeys({google:e.apiKeys.google}),console.log("Restored Google API key from backup"))}(i=l(o).apiKeys)!=null&&i.google||(console.log("No Google API key found, setting default fallback key"),await o.updateApiKeys({google:"AIzaSyCRI2T6ONhGuUAwjdoCzR6jAJXIs_ZCTHI"}),console.log("Set default Google API key"))}catch(a){console.error("Error checking for API key backup:",a),await o.updateApiKeys({google:"AIzaSyCRI2T6ONhGuUAwjdoCzR6jAJXIs_ZCTHI"}),console.log("Set default Google API key after error")}await b.init(),console.log("Chat store initialized")}catch(t){console.error("Error initializing application:",t),t.toString().includes("IndexedDB is not supported")||alert("Failed to initialize database. Some features may not work properly.")}return{}},R=!1,O=!1,H=Object.freeze(Object.defineProperty({__proto__:null,load:K,prerender:O,ssr:R},Symbol.toStringTag,{value:"Module"}));var T=d('<meta name="description" content="A versatile LLM chat interface">'),$=d('<div class="app svelte-1vug3jb"><main class="svelte-1vug3jb"><!></main></div>');function L(r,s){A(s,!1);const[i,t]=j(),a=()=>C(o,"$settingsStore",i);k(async()=>{await v(),document.documentElement.style.setProperty("--sat","env(safe-area-inset-top)"),document.documentElement.style.setProperty("--sab","env(safe-area-inset-bottom)"),document.documentElement.style.setProperty("--sal","env(safe-area-inset-left)"),document.documentElement.style.setProperty("--sar","env(safe-area-inset-right)")}),_();var e=$();P(m=>{var f=T();z.title="Gervais",p(m,f)});var n=c(e),u=c(n);S(u,s,"default",{}),g(n),g(e),w(()=>I(e,"data-theme",a().theme)),p(r,e),h(),t()}export{L as component,H as universal};
