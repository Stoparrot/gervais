import{a as S,s,i as k}from"../chunks/DKo2NcW4.js";import{c as $,s as P,a as A}from"../chunks/BqOXQazp.js";import{F as r,w as I,al as j,T as _,z,aC as E,V as u,W as f}from"../chunks/HdFacVVh.js";import{t as m,b as g}from"../chunks/B53aYDk4.js";import{i as R}from"../chunks/iPtxYXkW.js";import{k as C}from"../chunks/BQXpTCfL.js";import{s as T,a as B}from"../chunks/BNNRLxDv.js";import{s as G}from"../chunks/DEsSkPtR.js";const q=!0,K=q,M=async()=>{var e,n,a;try{await S.initialize(),console.log("IndexedDB initialized"),await s.init(),console.log("Settings store initialized");const t=r(s);if(console.log("Current settings state:",t),!((e=t.apiKeys)!=null&&e.google)&&K&&window.localStorage)try{const i=localStorage.getItem("gervais-api-backup");if(i){const o=JSON.parse(i);(n=o==null?void 0:o.apiKeys)!=null&&n.google&&(console.log("Found Google API key in localStorage backup, restoring it"),await s.updateApiKeys({google:o.apiKeys.google}),console.log("Restored Google API key from backup"))}(a=r(s).apiKeys)!=null&&a.google||(console.log("No Google API key found, setting default fallback key"),await s.updateApiKeys({google:"AIzaSyCRI2T6ONhGuUAwjdoCzR6jAJXIs_ZCTHI"}),console.log("Set default Google API key"))}catch(i){console.error("Error checking for API key backup:",i),await s.updateApiKeys({google:"AIzaSyCRI2T6ONhGuUAwjdoCzR6jAJXIs_ZCTHI"}),console.log("Set default Google API key after error")}await $.init(),console.log("Chat store initialized")}catch(t){console.error("Error initializing application:",t),t.toString().includes("IndexedDB is not supported")||alert("Failed to initialize database. Some features may not work properly.")}return{}},O=!1,F=!1,we=Object.freeze(Object.defineProperty({__proto__:null,load:M,prerender:F,ssr:O},Symbol.toStringTag,{value:"Module"})),D=()=>{const e=G;return{page:{subscribe:e.page.subscribe},navigating:{subscribe:e.navigating.subscribe},updated:e.updated}},c={subscribe(e){return D().page.subscribe(e)}};var J="@vercel/analytics",N="1.5.0",W=()=>{window.va||(window.va=function(...n){(window.vaq=window.vaq||[]).push(n)})};function v(){return typeof window<"u"}function b(){try{const e="production"}catch{}return"production"}function x(e="auto"){if(e==="auto"){window.vam=b();return}window.vam=e}function V(){return(v()?window.vam:b())||"production"}function d(){return V()==="development"}function H(e){return e.scriptSrc?e.scriptSrc:d()?"https://va.vercel-scripts.com/v1/script.debug.js":e.basePath?`${e.basePath}/insights/script.js`:"/_vercel/insights/script.js"}function L(e={debug:!0}){var n;if(!v())return;x(e.mode),W(),e.beforeSend&&((n=window.va)==null||n.call(window,"beforeSend",e.beforeSend));const a=H(e);if(document.head.querySelector(`script[src*="${a}"]`))return;const t=document.createElement("script");t.src=a,t.defer=!0,t.dataset.sdkn=J+(e.framework?`/${e.framework}`:""),t.dataset.sdkv=N,e.disableAutoTrack&&(t.dataset.disableAutoTrack="1"),e.endpoint?t.dataset.endpoint=e.endpoint:e.basePath&&(t.dataset.endpoint=`${e.basePath}/insights`),e.dsn&&(t.dataset.dsn=e.dsn),t.onerror=()=>{const i=d()?"Please check if any ad blockers are enabled and try again.":"Be sure to enable Web Analytics for your project and deploy again. See https://vercel.com/docs/analytics/quickstart for more information.";console.log(`[Vercel Web Analytics] Failed to load script from ${a}. ${i}`)},d()&&e.debug===!1&&(t.dataset.debug="false"),document.head.appendChild(t)}function Q({route:e,path:n}){var a;(a=window.va)==null||a.call(window,"pageview",{route:e,path:n})}function U(){try{return}catch{}}function X(e={}){L({...e,basePath:U(),disableAutoTrack:!0,framework:"sveltekit"}),c.subscribe(({route:n,url:a})=>{n!=null&&n.id&&Q({route:n.id,path:a.pathname})})}var Z="@vercel/speed-insights",Y="1.2.0",ee=()=>{window.si||(window.si=function(...n){(window.siq=window.siq||[]).push(n)})};function te(){return typeof window<"u"}function ne(){try{const e="production"}catch{}return"production"}function w(){return ne()==="development"}function ae(e){return e.scriptSrc?e.scriptSrc:w()?"https://va.vercel-scripts.com/v1/speed-insights/script.debug.js":e.dsn?"https://va.vercel-scripts.com/v1/speed-insights/script.js":e.basePath?`${e.basePath}/speed-insights/script.js`:"/_vercel/speed-insights/script.js"}function ie(e={}){var n;if(!te()||e.route===null)return null;ee();const a=ae(e);if(document.head.querySelector(`script[src*="${a}"]`))return null;e.beforeSend&&((n=window.si)==null||n.call(window,"beforeSend",e.beforeSend));const t=document.createElement("script");return t.src=a,t.defer=!0,t.dataset.sdkn=Z+(e.framework?`/${e.framework}`:""),t.dataset.sdkv=Y,e.sampleRate&&(t.dataset.sampleRate=e.sampleRate.toString()),e.route&&(t.dataset.route=e.route),e.endpoint?t.dataset.endpoint=e.endpoint:e.basePath&&(t.dataset.endpoint=`${e.basePath}/speed-insights/vitals`),e.dsn&&(t.dataset.dsn=e.dsn),w()&&e.debug===!1&&(t.dataset.debug="false"),t.onerror=()=>{console.log(`[Vercel Speed Insights] Failed to load script from ${a}. Please check if any content blockers are enabled and try again.`)},document.head.appendChild(t),{setRoute:i=>{t.dataset.route=i??void 0}}}function oe(){try{return}catch{}}function se(e={}){var n;{const a=ie({route:(n=r(c).route)==null?void 0:n.id,...e,framework:"sveltekit",basePath:oe()});a&&c.subscribe(t=>{var i;(i=t.route)!=null&&i.id&&a.setRoute(t.route.id)})}}var re=m('<meta name="description" content="A versatile LLM chat interface">'),ce=m('<div class="app svelte-1vug3jb"><main class="svelte-1vug3jb"><!></main></div>');function he(e,n){I(n,!1);const[a,t]=T(),i=()=>B(s,"$settingsStore",a);X(),se(),j(async()=>{await k(),document.documentElement.style.setProperty("--sat","env(safe-area-inset-top)"),document.documentElement.style.setProperty("--sab","env(safe-area-inset-bottom)"),document.documentElement.style.setProperty("--sal","env(safe-area-inset-left)"),document.documentElement.style.setProperty("--sar","env(safe-area-inset-right)")}),R();var o=ce();C(p=>{var y=re();E.title="Gervais",g(p,y)});var l=u(o),h=u(l);P(h,n,"default",{}),f(l),f(o),_(()=>A(o,"data-theme",i().theme)),g(e,o),z(),t()}export{he as component,we as universal};
